Joomla=window.Joomla||{};!function(document,Joomla){"use strict";Joomla.setcollapse=function(url,name,height){if(!document.getElementById("collapse-"+name)){document.getElementById("container-collapse").innerHTML='<div class="collapse fade" id="collapse-'+name+'"><iframe class="iframe" src="'+url+'" height="'+height+'" width="100%"></iframe></div>'}};window.jQuery&&function($){function linkedoptions(target,animate){var showfield=true,jsondata=target.data("showon")||[],itemval,condition,fieldName,$fields;for(var j=0,lj=jsondata.length;j<lj;j++){condition=jsondata[j]||{};fieldName=condition.field;$fields=$('[name="'+fieldName+'"], [name="'+fieldName+'[]"]');condition["valid"]=0;$fields.each(function(){var $field=$(this);if(["checkbox","radio"].indexOf($field.attr("type"))!==-1){if(!$field.prop("checked")){return}itemval=$field.val()}else{itemval=$field.val();if(itemval==null&&$field.prop("tagName").toLowerCase()=="select"){itemval=[]}}if(!(typeof itemval==="object")){itemval=JSON.parse('["'+itemval+'"]')}for(var i in itemval){if(!itemval.propertyIsEnumerable(i)){continue}if(jsondata[j]["sign"]=="="&&jsondata[j]["values"].indexOf(itemval[i])!==-1){jsondata[j]["valid"]=1}if(jsondata[j]["sign"]=="!="&&jsondata[j]["values"].indexOf(itemval[i])===-1){jsondata[j]["valid"]=1}}});if(condition["op"]===""){if(condition["valid"]===0){showfield=false}}else{if(condition["op"]==="AND"&&condition["valid"]+jsondata[j-1]["valid"]<2){showfield=false}if(condition["op"]==="OR"&&condition["valid"]+jsondata[j-1]["valid"]>0){showfield=true}}}if(animate){showfield?target.slideDown():target.slideUp()}else{target.toggle(showfield)}}function setUpShowon(container){container=container||document;console.log(container);var $showonFields=$(container).find("[data-showon]");for(var is=0,ls=$showonFields.length;is<ls;is++){(function(){var $target=$($showonFields[is]),jsondata=$target.data("showon")||[],field,$fields=$();for(var ij=0,lj=jsondata.length;ij<lj;ij++){field=jsondata[ij]["field"];$fields=$fields.add($('[name="'+field+'"], [name="'+field+'[]"]'))}linkedoptions($target);$fields.on("change",function(){linkedoptions($target,true)})})()}}document.addEventListener("DOMContentLoaded",function(event){setUpShowon(event.target)});document.addEventListener("joomla:updated",function(event){var $target=$(event.target);if($target.hasClass("subform-repeatable-group")){var $elements=$target.find("[data-showon]"),baseName=$target.data("baseName"),group=$target.data("group"),search=new RegExp("\\["+baseName+"\\]\\["+baseName+"X\\]","g"),replace="["+baseName+"]["+group+"]",$elm,showon;for(var i=0,l=$elements.length;i<l;i++){$elm=$($elements[i]);showon=$elm.attr("data-showon").replace(search,replace);$elm.attr("data-showon",showon)}}setUpShowon(event.target)})}(jQuery)}(document,Joomla);
